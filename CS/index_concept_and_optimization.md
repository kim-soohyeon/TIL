# 인덱스와 성능 최적화
---

## 인덱스(Index)

인덱스는 데이터를 빠르게 찾을 수 있도록 도와주는 **검색 도구**입니다. 책에서 특정 단어를 찾을 때, **책의 인덱스(색인)** 를 참고하는 것과 같은 원리입니다. 

DBMS에서도 원하는 데이터를 쉽고 빠르게 조회하기 위해 인덱스를 사용합니다. DBMS의 인덱스는 **인덱스 키(Key)와 행 주소(Row Address)** 정보를 포함합니다.

- **인덱스 키**: 검색하려는 키워드 (예: 특정 열의 값)
- **행 주소**: 해당 키가 저장된 **데이터의 위치 정보** (책에서 인덱스에 적힌 페이지 번호와 유사)

## 인덱스와 기본 키(Primary Key)의 관계

기본 키(Primary Key)는 테이블에서 **중복될 수 없는 유일한 값**을 가지며, 데이터베이스의 핵심 요소입니다. DBMS는 기본 키로 지정된 열에 대해 **자동으로 인덱스를 생성**합니다.

인덱스를 활용하면 테이블의 모든 데이터를 일일이 확인하는 **Full Scan** 없이, 원하는 데이터를 빠르게 검색할 수 있습니다. 하지만 데이터 양이 많아질수록 인덱스 검색 속도도 느려질 수 있습니다. 이 문제를 해결하기 위해 **B-Tree 인덱스**가 등장했습니다.

### **B-Tree 인덱스 구조**

B-Tree 인덱스는 **뒤집어진 나무(Tree) 형태**의 구조로 이루어져 있습니다.

- **루트 노드(Root Node)**: 트리의 최상위 노드
- **브랜치 노드(Branch Node)**: 중간 단계의 노드
- **리프 노드(Leaf Node)**: 실제 데이터를 가리키는 노드

DBMS는 검색할 때, **루트 노드부터 시작하여 값의 크기를 비교하면서** 점점 탐색 범위를 좁혀 나갑니다. 이러한 **계층적 탐색 방식** 덕분에, 많은 양의 데이터를 빠르게 검색할 수 있습니다.

## 인덱스를 지정하는 방법

DBMS는 **모든 열(Column)에 대해 자동으로 인덱스를 생성하지 않습니다**. 따라서 **검색 성능을 높이기 위해 필요한 경우 직접 인덱스를 지정해야 합니다.** 단, 인덱스를 잘못 지정하면 오히려 성능이 저하될 수 있으므로 신중하게 선택해야 합니다.

### **인덱스 생성 문법**

```sql
CREATE INDEX 인덱스명 ON 테이블명(컬럼명);
```

### **인덱스를 잘 지정하는 방법**

다음과 같은 조건을 고려하여 인덱스를 지정하는 것이 좋습니다.

✔ **중복이 적고 유일한 값이 많은 열을 인덱스로 설정**

- 예: **주민번호, 사용자 ID** → 각각의 값이 **고유**하므로 검색 속도 향상
- 반면, **성별(남/여)** 과 같은 값은 **중복**이 많아 인덱스 효과가 미미함

✔ **짧은 길이의 데이터 열을 선택**

- 예: **정수형(숫자) 데이터**는 검색이 빠름
- 반면, **긴 문자열(주소, 설명 등)** 을 인덱스로 설정하면 데이터 크기가 커져 성능 저하 가능

✔ **자주 검색에 사용되는 열을 인덱스로 지정**

- WHERE 조건절에서 자주 조회되는 컬럼이 적합
