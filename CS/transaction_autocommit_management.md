# 트랜잭션과 오토커밋
---

## 트랜잭션(Transaction)

컴퓨터로 처리하는 작업의 단위입니다.

## 스프링 프레임워크에서의 트랜잭션 관리

스프링 프레임워크에서는 `@Transactional` 어노테이션을 사용하여 트랜잭션을 정의할 수 있습니다. 이를 통해 코드에서 직접 `commit`이나 `rollback` 메서드를 호출하지 않고도 특정 구간의 코드를 하나의 트랜잭션으로 처리할 수 있습니다.

---

## 커밋과 롤백

### 커밋(Commit)

‘약속하다’라는 의미로, 여러 개의 쿼리를 하나의 트랜잭션으로 묶어 실행을 보장하는 명령어입니다. 커밋이 수행되면 데이터베이스에 변경 사항이 영구적으로 반영됩니다.

### 롤백(Rollback)

쿼리 실행 도중 오류가 발생했을 때, 트랜잭션 이전 상태로 되돌리기 위해 사용하는 명령어입니다. 단, 커밋이 실행된 후에는 롤백을 수행할 수 없습니다.

트랜잭션이 커밋되지 않으면 추가되거나 변경된 데이터는 메모리에만 저장되며, 디스크에 기록되지 않습니다. 이 상태에서는 해당 데이터가 잠금(lock) 상태가 되어 다른 사용자가 변경할 수 없습니다. 하지만 너무 오랫동안 커밋하지 않으면 타임아웃(timeout)으로 인해 강제 롤백될 수 있습니다.

---

## 오토커밋(Auto Commit)을 해제해야 하는 이유

### 오토커밋이란?

**오토커밋(Auto Commit)** 은 쿼리를 실행할 때마다 자동으로 커밋을 수행하는 DBMS 기능입니다. 즉, 각 쿼리가 하나의 트랜잭션 단위로 처리됩니다.

예를 들어, 계좌에서 돈을 인출한 후 입금하는 과정에서 오토커밋이 활성화되어 있으면, 인출 쿼리가 실행된 즉시 커밋이 되어버립니다. 만약 입금 과정에서 오류가 발생하면 인출된 돈을 되돌릴 방법이 없어 데이터 무결성이 깨질 수 있습니다. 따라서 여러 개의 작업을 논리적으로 하나의 트랜잭션으로 묶어야 하는 경우에는 오토커밋을 해제하는 것이 바람직합니다

### 오토커밋 해제 방법

```java
connection.setAutoCommit(false);
```

이렇게 설정하면 명시적으로 `commit()`을 호출하기 전까지는 변경 사항이 적용되지 않습니다.
